import { getDate, getMonth } from 'date-fns';

export const MONTH_DAYS_BASE_NUMBERS: Record<
  number,
  Record<number, number[]>
> = {
  1: {
    1: [1, 5],
    2: [1, 6],
    3: [3, 6],
    4: [1, 5],
    5: [5, 6],
    6: [5, 6],
    7: [1, 7],
    8: [1, 3],
    9: [6, 9],
    10: [1, 5],
    11: [1, 6],
    12: [6, 9],
    13: [1, 5],
    14: [5, 6],
    15: [5, 6],
    16: [1, 5],
    17: [1, 3],
    18: [5, 6],
    19: [1, 5],
    20: [1, 6],
    21: [3, 6],
    22: [1, 5],
    23: [5, 6],
    24: [5, 6],
    25: [1, 5],
    26: [2, 3],
    27: [6, 9],
    28: [2, 7],
    29: [5, 7],
    30: [2, 3],
    31: [2, 7],
  },
  2: {
    1: [2, 7],
    2: [2, 7],
    3: [3, 6],
    4: [2, 7],
    5: [5, 6],
    6: [3, 6],
    7: [2, 7],
    8: [2, 3],
    9: [3, 6],
    10: [2, 7],
    11: [5, 7],
    12: [5, 6],
    13: [2, 7],
    14: [5, 6],
    15: [3, 6],
    16: [2, 5],
    17: [2, 3],
    18: [3, 6],
    19: [2, 7],
    20: [2, 7],
    21: [3, 6],
    22: [2, 7],
    23: [5, 6],
    24: [5, 6],
    25: [2, 7],
    26: [2, 3],
    27: [6, 9],
    28: [2, 7],
    29: [6, 7],
  },
  3: {
    1: [1, 7],
    2: [2, 7],
    3: [3, 6],
    4: [1, 7],
    5: [5, 7],
    6: [3, 6],
    7: [2, 7],
    8: [3, 6],
    9: [6, 9],
    10: [1, 7],
    11: [1, 7],
    12: [6, 7],
    13: [1, 5],
    14: [5, 7],
    15: [3, 6],
    16: [1, 2],
    17: [3, 6],
    18: [3, 6],
    19: [1, 7],
    20: [2, 7],
    21: [3, 6],
    22: [1, 7],
    23: [6, 7],
    24: [3, 6],
    25: [2, 7],
    26: [1, 3],
    27: [1, 9],
    28: [5, 9],
    29: [1, 7],
    30: [3, 9],
    31: [1, 7],
  },
  4: {
    1: [1, 7],
    2: [1, 7],
    3: [3, 9],
    4: [1, 7],
    5: [5, 7],
    6: [3, 6],
    7: [5, 7],
    8: [1, 3],
    9: [3, 9],
    10: [1, 7],
    11: [1, 7],
    12: [1, 9],
    13: [1, 7],
    14: [5, 7],
    15: [3, 6],
    16: [1, 2],
    17: [1, 3],
    18: [1, 3],
    19: [1, 7],
    20: [2, 7],
    21: [1, 3],
    22: [1, 7],
    23: [5, 7],
    24: [3, 5],
    25: [5, 7],
    26: [2, 3],
    27: [3, 6],
    28: [2, 7],
    29: [1, 7],
    30: [3, 6],
  },
  5: {
    1: [1, 2],
    2: [2, 7],
    3: [3, 6],
    4: [1, 7],
    5: [5, 6],
    6: [5, 6],
    7: [2, 7],
    8: [2, 5],
    9: [5, 9],
    10: [1, 5],
    11: [1, 7],
    12: [2, 6],
    13: [1, 7],
    14: [5, 6],
    15: [5, 6],
    16: [2, 5],
    17: [2, 3],
    18: [5, 6],
    19: [1, 2],
    20: [2, 7],
    21: [3, 6],
    22: [1, 7],
    23: [5, 6],
    24: [5, 6],
    25: [2, 7],
    26: [2, 5],
    27: [5, 9],
    28: [2, 7],
    29: [5, 7],
    30: [5, 6],
    31: [1, 5],
  },
  6: {
    1: [1, 5],
    2: [2, 7],
    3: [5, 6],
    4: [1, 5],
    5: [5, 6],
    6: [5, 6],
    7: [2, 7],
    8: [3, 7],
    9: [5, 9],
    10: [1, 5],
    11: [5, 7],
    12: [5, 6],
    13: [1, 5],
    14: [5, 6],
    15: [5, 6],
    16: [2, 5],
    17: [2, 5],
    18: [5, 6],
    19: [1, 5],
    20: [2, 7],
    21: [5, 6],
    22: [1, 5],
    23: [5, 6],
    24: [5, 6],
    25: [2, 7],
    26: [2, 5],
    27: [5, 6],
    28: [2, 7],
    29: [1, 7],
    30: [2, 3],
  },
  7: {
    1: [1, 2],
    2: [2, 7],
    3: [2, 3],
    4: [1, 7],
    5: [5, 7],
    6: [2, 6],
    7: [2, 7],
    8: [2, 3],
    9: [2, 3],
    10: [1, 2],
    11: [1, 7],
    12: [2, 6],
    13: [1, 2],
    14: [5, 7],
    15: [6, 7],
    16: [1, 2],
    17: [2, 3],
    18: [2, 3],
    19: [1, 2],
    20: [2, 7],
    21: [3, 6],
    22: [1, 2],
    23: [5, 7],
    24: [6, 7],
    25: [2, 7],
    26: [2, 3],
    27: [1, 9],
    28: [2, 7],
    29: [1, 7],
    30: [3, 6],
    31: [1, 7],
  },
  8: {
    1: [1, 2],
    2: [1, 5],
    3: [3, 6],
    4: [1, 2],
    5: [1, 5],
    6: [3, 6],
    7: [2, 7],
    8: [2, 3],
    9: [3, 6],
    10: [1, 2],
    11: [1, 7],
    12: [1, 6],
    13: [1, 2],
    14: [1, 5],
    15: [1, 6],
    16: [1, 2],
    17: [1, 3],
    18: [1, 3],
    19: [1, 2],
    20: [2, 7],
    21: [3, 6],
    22: [1, 2],
    23: [1, 5],
    24: [3, 6],
    25: [2, 7],
    26: [2, 3],
    27: [3, 6],
    28: [2, 5],
    29: [1, 5],
    30: [3, 6],
    31: [1, 5],
  },
  9: {
    1: [1, 5],
    2: [2, 5],
    3: [3, 6],
    4: [1, 5],
    5: [5, 6],
    6: [5, 6],
    7: [2, 5],
    8: [2, 3],
    9: [3, 6],
    10: [1, 2],
    11: [1, 5],
    12: [3, 6],
    13: [1, 5],
    14: [5, 6],
    15: [5, 6],
    16: [2, 5],
    17: [2, 3],
    18: [3, 6],
    19: [1, 5],
    20: [2, 7],
    21: [3, 6],
    22: [1, 7],
    23: [5, 6],
    24: [3, 6],
    25: [2, 7],
    26: [3, 6],
    27: [6, 9],
    28: [2, 7],
    29: [1, 7],
    30: [3, 6],
  },
  10: {
    1: [2, 7],
    2: [2, 7],
    3: [3, 6],
    4: [1, 7],
    5: [5, 6],
    6: [3, 6],
    7: [2, 7],
    8: [3, 6],
    9: [3, 6],
    10: [1, 5],
    11: [1, 6],
    12: [2, 6],
    13: [1, 7],
    14: [5, 6],
    15: [3, 6],
    16: [1, 2],
    17: [3, 6],
    18: [3, 6],
    19: [2, 7],
    20: [2, 7],
    21: [3, 6],
    22: [1, 7],
    23: [5, 6],
    24: [3, 6],
    25: [2, 7],
    26: [3, 6],
    27: [6, 9],
    28: [2, 7],
    29: [1, 7],
    30: [3, 6],
    31: [1, 7],
  },
  11: {
    1: [1, 7],
    2: [1, 7],
    3: [3, 9],
    4: [1, 7],
    5: [5, 7],
    6: [3, 5],
    7: [1, 7],
    8: [3, 9],
    9: [3, 9],
    10: [2, 7],
    11: [1, 7],
    12: [1, 9],
    13: [1, 7],
    14: [5, 7],
    15: [3, 5],
    16: [1, 5],
    17: [3, 9],
    18: [3, 9],
    19: [1, 7],
    20: [2, 7],
    21: [3, 9],
    22: [1, 7],
    23: [5, 7],
    24: [3, 5],
    25: [1, 7],
    26: [3, 9],
    27: [3, 9],
    28: [2, 7],
    29: [1, 7],
    30: [3, 6],
  },
  12: {
    1: [1, 7],
    2: [2, 7],
    3: [3, 6],
    4: [1, 7],
    5: [3, 6],
    6: [3, 6],
    7: [2, 7],
    8: [2, 3],
    9: [3, 9],
    10: [1, 7],
    11: [1, 7],
    12: [6, 9],
    13: [1, 3],
    14: [5, 6],
    15: [3, 6],
    16: [1, 2],
    17: [2, 3],
    18: [3, 6],
    19: [1, 7],
    20: [2, 7],
    21: [3, 6],
    22: [1, 7],
    23: [5, 6],
    24: [3, 6],
    25: [3, 7],
    26: [3, 6],
    27: [6, 9],
    28: [5, 6],
    29: [1, 6],
    30: [3, 6],
    31: [1, 3],
  },
};

export function getFavorableDays({ birthday }: { birthday: Date }): number[] {
  const day = getDate(birthday);
  const month = getMonth(birthday) + 1;

  const baseNumbers = MONTH_DAYS_BASE_NUMBERS[month][day];
  const thirdFavorableDay = baseNumbers[1] * 2;

  const favorableDays = [...baseNumbers, thirdFavorableDay];
  let currentValue = thirdFavorableDay;

  while (currentValue < 30) {
    const indexToGrab = favorableDays.length % 2 === 0 ? 1 : 0;

    const newValue = currentValue + baseNumbers[indexToGrab];
    if (newValue > 30) break;

    favorableDays.push(newValue);
    currentValue = newValue;
  }

  return favorableDays;
}
